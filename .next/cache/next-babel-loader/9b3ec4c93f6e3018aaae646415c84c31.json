{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"D:/WebstormProjects/next-app/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PUT = exports.DELETE = exports.POST = exports.GET = void 0;\n\nrequire(\"antd/lib/message/style\");\n\nvar _message2 = _interopRequireDefault(require(\"antd/lib/message\"));\n\nvar request = function request(url, config) {\n  return new Promise(function (resolve, reject) {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BASE_URL).concat(url), config).then(function (res) {\n      if (!res.ok) {\n        throw Error('');\n      }\n\n      return res.json();\n    }).then(function (resJson) {\n      if (resJson.code === 0) {\n        return resolve(resJson.data || {});\n      } else {\n        _message2[\"default\"].error(resJson.message);\n\n        return reject();\n      }\n    })[\"catch\"](function (error) {\n      // 公共错误处理\n      console.log(error);\n    });\n  });\n};\n\nvar GET = function GET(url, params) {\n  if (params) {\n    url += Object.keys(params).reduce(function (accumulator, currentValue, index) {\n      return \"\".concat(index !== 0 ? '&' : '').concat(accumulator).concat(currentValue, \"=\").concat(params[currentValue]);\n    }, '?');\n  }\n\n  return request(url, {\n    method: 'GET'\n  });\n};\n\nexports.GET = GET;\n\nvar POST = function POST(url) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return request(url, {\n    body: JSON.stringify(params),\n    headers: {\n      'content-type': 'application/json'\n    },\n    method: 'POST'\n  });\n};\n\nexports.POST = POST;\n\nvar DELETE = function DELETE(url, params) {\n  if (params) {\n    url += Object.keys(params).reduce(function (accumulator, currentValue, index) {\n      return \"\".concat(index !== 0 ? '&' : '').concat(accumulator).concat(currentValue, \"=\").concat(params[currentValue]);\n    }, '?');\n  }\n\n  return request(url, {\n    method: 'DELETE'\n  });\n};\n\nexports.DELETE = DELETE;\n\nvar PUT = function PUT(url) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return request(url, {\n    body: JSON.stringify(params),\n    headers: {\n      'content-type': 'application/json'\n    },\n    method: 'PUT'\n  });\n};\n\nexports.PUT = PUT;\nmodule.exports = {\n  GET: GET,\n  POST: POST,\n  DELETE: DELETE,\n  PUT: PUT\n};","map":null,"metadata":{},"sourceType":"script"}