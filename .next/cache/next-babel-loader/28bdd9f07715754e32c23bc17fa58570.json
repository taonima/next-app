{"ast":null,"code":"import \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\n\nconst request = (url, config) => {\n  return fetch(`${process.env.NEXT_PUBLIC_BASE_URL}${url}`, config).then(res => {\n    if (!res.ok) {\n      throw Error('');\n    }\n\n    return res.json();\n  }).then(resJson => {\n    if (resJson.code === 0) {\n      return Promise.resolve(resJson.data || {});\n    } else {\n      _message.error(resJson.message);\n\n      return Promise.reject();\n    }\n  }).catch(error => {\n    // 公共错误处理\n    console.log(error);\n  });\n};\n\nexport const get = (url, params) => {\n  if (params) {\n    url += Object.keys(params).reduce((accumulator, currentValue, index) => {\n      return `${index !== 0 ? '&' : ''}${accumulator}${currentValue}=${params[currentValue]}`;\n    }, '?');\n  }\n\n  return request(url, {\n    method: 'GET'\n  });\n};\nexport const post = (url, params = {}) => {\n  return request(url, {\n    body: JSON.stringify(params),\n    headers: {\n      'content-type': 'application/json'\n    },\n    method: 'POST'\n  });\n};\nexport default {\n  get,\n  post\n};","map":{"version":3,"sources":["D:/WebstormProjects/next-app/utils/request.ts"],"names":["request","url","config","fetch","process","env","NEXT_PUBLIC_BASE_URL","then","res","ok","Error","json","resJson","code","Promise","resolve","data","error","message","reject","catch","console","log","get","params","Object","keys","reduce","accumulator","currentValue","index","method","post","body","JSON","stringify","headers"],"mappings":";;;AAEA,MAAMA,OAAO,GAAG,CAACC,GAAD,EAAcC,MAAd,KAA8B;AAC1C,SAAOC,KAAK,CAAE,GAAEC,OAAO,CAACC,GAAR,CAAYC,oBAAqB,GAAEL,GAAI,EAA3C,EAA8CC,MAA9C,CAAL,CAA2DK,IAA3D,CAAiEC,GAAD,IAAc;AACjF,QAAI,CAACA,GAAG,CAACC,EAAT,EAAa;AACT,YAAMC,KAAK,CAAC,EAAD,CAAX;AACH;;AACD,WAAOF,GAAG,CAACG,IAAJ,EAAP;AACH,GALM,EAKJJ,IALI,CAKEK,OAAD,IAAkB;AACtB,QAAIA,OAAO,CAACC,IAAR,KAAiB,CAArB,EAAwB;AACpB,aAAOC,OAAO,CAACC,OAAR,CAAgBH,OAAO,CAACI,IAAR,IAAgB,EAAhC,CAAP;AACH,KAFD,MAEO;AACH,eAAQC,KAAR,CAAcL,OAAO,CAACM,OAAtB;;AACA,aAAOJ,OAAO,CAACK,MAAR,EAAP;AACH;AACJ,GAZM,EAYJC,KAZI,CAYGH,KAAD,IAAgB;AACrB;AACAI,IAAAA,OAAO,CAACC,GAAR,CAAYL,KAAZ;AACH,GAfM,CAAP;AAgBH,CAjBD;;AAmBA,OAAO,MAAMM,GAAG,GAAG,CAACtB,GAAD,EAAMuB,MAAN,KAAkB;AACjC,MAAIA,MAAJ,EAAY;AACRvB,IAAAA,GAAG,IAAIwB,MAAM,CAACC,IAAP,CAAYF,MAAZ,EAAoBG,MAApB,CAA2B,CAACC,WAAD,EAAcC,YAAd,EAA4BC,KAA5B,KAAsC;AACpE,aAAQ,GAAEA,KAAK,KAAK,CAAV,GAAc,GAAd,GAAoB,EAAG,GAAEF,WAAY,GAAEC,YAAa,IAAGL,MAAM,CAACK,YAAD,CAAe,EAAtF;AACH,KAFM,EAEJ,GAFI,CAAP;AAGH;;AACD,SAAO7B,OAAO,CAACC,GAAD,EAAK;AAAC8B,IAAAA,MAAM,EAAE;AAAT,GAAL,CAAd;AACH,CAPM;AASP,OAAO,MAAMC,IAAI,GAAG,CAAC/B,GAAD,EAAMuB,MAAM,GAAG,EAAf,KAAsB;AACtC,SAAOxB,OAAO,CAACC,GAAD,EAAM;AAChBgC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeX,MAAf,CADU;AAEhBY,IAAAA,OAAO,EAAE;AACL,sBAAgB;AADX,KAFO;AAKhBL,IAAAA,MAAM,EAAE;AALQ,GAAN,CAAd;AAOH,CARM;AAUP,eAAe;AACXR,EAAAA,GADW;AAEXS,EAAAA;AAFW,CAAf","sourcesContent":["import {message} from \"antd\";\r\n\r\nconst request = (url: string, config: any) => {\r\n    return fetch(`${process.env.NEXT_PUBLIC_BASE_URL}${url}`, config).then((res: any) => {\r\n        if (!res.ok) {\r\n            throw Error('');\r\n        }\r\n        return res.json();\r\n    }).then((resJson: any) => {\r\n        if (resJson.code === 0) {\r\n            return Promise.resolve(resJson.data || {});\r\n        } else {\r\n            message.error(resJson.message);\r\n            return Promise.reject();\r\n        }\r\n    }).catch((error: any) => {\r\n        // 公共错误处理\r\n        console.log(error)\r\n    });\r\n};\r\n\r\nexport const get = (url, params?) => {\r\n    if (params) {\r\n        url += Object.keys(params).reduce((accumulator, currentValue, index) => {\r\n            return `${index !== 0 ? '&' : ''}${accumulator}${currentValue}=${params[currentValue]}`\r\n        }, '?')\r\n    }\r\n    return request(url,{method: 'GET'})\r\n}\r\n\r\nexport const post = (url, params = {}) => {\r\n    return request(url, {\r\n        body: JSON.stringify(params),\r\n        headers: {\r\n            'content-type': 'application/json'\r\n        },\r\n        method: 'POST'\r\n    });\r\n}\r\n\r\nexport default {\r\n    get,\r\n    post\r\n}"]},"metadata":{},"sourceType":"module"}