{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PUT = exports.DELETE = exports.POST = exports.GET = void 0;\n\nrequire(\"antd/lib/message/style\");\n\nvar _message2 = _interopRequireDefault(require(\"antd/lib/message\"));\n\nvar request = function request(url, config) {\n  return new Promise(function (resolve, reject) {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BASE_URL).concat(url), config).then(function (res) {\n      if (!res.ok) {\n        throw Error('');\n      }\n\n      return res.json();\n    }).then(function (resJson) {\n      if (resJson.code === 0) {\n        return resolve(resJson.data || {});\n      } else {\n        _message2[\"default\"].error(resJson.message);\n\n        return reject();\n      }\n    })[\"catch\"](function (error) {\n      // 公共错误处理\n      console.log(error);\n    });\n  });\n};\n\nvar GET = function GET(url, params) {\n  if (params) {\n    url += Object.keys(params).reduce(function (accumulator, currentValue, index) {\n      return \"\".concat(index !== 0 ? '&' : '').concat(accumulator).concat(currentValue, \"=\").concat(params[currentValue]);\n    }, '?');\n  }\n\n  return request(url, {\n    method: 'GET'\n  });\n};\n\nexports.GET = GET;\n_c = GET;\n\nvar POST = function POST(url) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return request(url, {\n    body: JSON.stringify(params),\n    headers: {\n      'content-type': 'application/json'\n    },\n    method: 'POST'\n  });\n};\n\nexports.POST = POST;\n_c2 = POST;\n\nvar DELETE = function DELETE(url, params) {\n  if (params) {\n    url += Object.keys(params).reduce(function (accumulator, currentValue, index) {\n      return \"\".concat(index !== 0 ? '&' : '').concat(accumulator).concat(currentValue, \"=\").concat(params[currentValue]);\n    }, '?');\n  }\n\n  return request(url, {\n    method: 'DELETE'\n  });\n};\n\nexports.DELETE = DELETE;\n_c3 = DELETE;\n\nvar PUT = function PUT(url) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return request(url, {\n    body: JSON.stringify(params),\n    headers: {\n      'content-type': 'application/json'\n    },\n    method: 'PUT'\n  });\n};\n\nexports.PUT = PUT;\n_c4 = PUT;\nmodule.exports = {\n  GET: GET,\n  POST: POST,\n  DELETE: DELETE\n};\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"GET\");\n$RefreshReg$(_c2, \"POST\");\n$RefreshReg$(_c3, \"DELETE\");\n$RefreshReg$(_c4, \"PUT\");","map":{"version":3,"sources":["D:/WebstormProjects/next-app/utils/request.ts"],"names":["request","url","config","Promise","resolve","reject","fetch","process","env","NEXT_PUBLIC_BASE_URL","then","res","ok","Error","json","resJson","code","data","error","message","console","log","GET","params","Object","keys","reduce","accumulator","currentValue","index","method","POST","body","JSON","stringify","headers","DELETE","PUT","module","exports"],"mappings":"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","sourcesContent":["import {message} from \"antd\";\r\n\r\nconst request = (url: string, config: any) => {\r\n    return new Promise((resolve, reject) => {\r\n        fetch(`${process.env.NEXT_PUBLIC_BASE_URL}${url}`, config).then((res: any) => {\r\n            if (!res.ok) {\r\n                throw Error('');\r\n            }\r\n            return res.json();\r\n        }).then((resJson: any) => {\r\n            if (resJson.code === 0) {\r\n                return resolve(resJson.data || {});\r\n            } else {\r\n                message.error(resJson.message);\r\n                return reject();\r\n            }\r\n        }).catch((error: any) => {\r\n            // 公共错误处理\r\n            console.log(error)\r\n        });\r\n    })\r\n};\r\n\r\nexport const GET = (url, params?) => {\r\n    if (params) {\r\n        url += Object.keys(params).reduce((accumulator, currentValue, index) => {\r\n            return `${index !== 0 ? '&' : ''}${accumulator}${currentValue}=${params[currentValue]}`\r\n        }, '?')\r\n    }\r\n    return request(url,{method: 'GET'})\r\n}\r\n\r\nexport const POST = (url, params = {}) => {\r\n    return request(url, {\r\n        body: JSON.stringify(params),\r\n        headers: {\r\n            'content-type': 'application/json'\r\n        },\r\n        method: 'POST'\r\n    });\r\n}\r\n\r\nexport const DELETE = (url, params?) => {\r\n    if (params) {\r\n        url += Object.keys(params).reduce((accumulator, currentValue, index) => {\r\n            return `${index !== 0 ? '&' : ''}${accumulator}${currentValue}=${params[currentValue]}`\r\n        }, '?')\r\n    }\r\n    return request(url,{method: 'DELETE'})\r\n}\r\n\r\nexport const PUT = (url, params = {}) => {\r\n    return request(url, {\r\n        body: JSON.stringify(params),\r\n        headers: {\r\n            'content-type': 'application/json'\r\n        },\r\n        method: 'PUT'\r\n    });\r\n}\r\n\r\nmodule.exports = {\r\n    GET,\r\n    POST,\r\n    DELETE\r\n}\r\n"]},"metadata":{},"sourceType":"script"}