{"ast":null,"code":"var request = function request(url, config) {\n  return fetch(url, config).then(function (res) {\n    if (!res.ok) {\n      throw Error('');\n    }\n\n    return res.json();\n  }).then(function (resJson) {\n    if (resJson.code !== 200) {\n      throw Error(resJson.message);\n    } else {\n      return resJson.data;\n    }\n  })[\"catch\"](function (error) {\n    // 公共错误处理\n    console.log(error);\n  });\n};\n\nexport var get = function get(url, params) {\n  url = \"\".concat(process.env.BASE_URL).concat(url);\n\n  if (params) {\n    url += Object.keys(params).reduce(function (accumulator, currentValue, index) {\n      return \"\".concat(index !== 0 ? '&' : '').concat(accumulator).concat(currentValue, \"=\").concat(params[currentValue]);\n    }, '?');\n  }\n\n  return request(url, {\n    method: 'GET'\n  });\n};\nexport var post = function post(url) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return request(url, {\n    body: JSON.stringify(params),\n    headers: {\n      'content-type': 'application/json'\n    },\n    method: 'POST'\n  });\n};\nexport default {\n  get: get,\n  post: post\n};","map":{"version":3,"sources":["D:/WebstormProjects/next-app/utils/request.ts"],"names":["request","url","config","fetch","then","res","ok","Error","json","resJson","code","message","data","error","console","log","get","params","process","env","BASE_URL","Object","keys","reduce","accumulator","currentValue","index","method","post","body","JSON","stringify","headers"],"mappings":"AAAA,IAAMA,OAAO,GAAG,SAAVA,OAAU,CAACC,GAAD,EAAcC,MAAd,EAA8B;AAC1C,SAAOC,KAAK,CAACF,GAAD,EAAMC,MAAN,CAAL,CAAmBE,IAAnB,CAAwB,UAACC,GAAD,EAAc;AACzC,QAAI,CAACA,GAAG,CAACC,EAAT,EAAa;AACT,YAAMC,KAAK,CAAC,EAAD,CAAX;AACH;;AACD,WAAOF,GAAG,CAACG,IAAJ,EAAP;AACH,GALM,EAKJJ,IALI,CAKC,UAACK,OAAD,EAAkB;AACtB,QAAIA,OAAO,CAACC,IAAR,KAAiB,GAArB,EAA0B;AACtB,YAAMH,KAAK,CAACE,OAAO,CAACE,OAAT,CAAX;AACH,KAFD,MAEO;AACH,aAAOF,OAAO,CAACG,IAAf;AACH;AACJ,GAXM,WAWE,UAACC,KAAD,EAAgB;AACrB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,GAdM,CAAP;AAeH,CAhBD;;AAkBA,OAAO,IAAMG,GAAG,GAAG,SAANA,GAAM,CAACf,GAAD,EAAMgB,MAAN,EAAkB;AACjChB,EAAAA,GAAG,aAAMiB,OAAO,CAACC,GAAR,CAAYC,QAAlB,SAA6BnB,GAA7B,CAAH;;AACA,MAAIgB,MAAJ,EAAY;AACRhB,IAAAA,GAAG,IAAIoB,MAAM,CAACC,IAAP,CAAYL,MAAZ,EAAoBM,MAApB,CAA2B,UAACC,WAAD,EAAcC,YAAd,EAA4BC,KAA5B,EAAsC;AACpE,uBAAUA,KAAK,KAAK,CAAV,GAAc,GAAd,GAAoB,EAA9B,SAAmCF,WAAnC,SAAiDC,YAAjD,cAAiER,MAAM,CAACQ,YAAD,CAAvE;AACH,KAFM,EAEJ,GAFI,CAAP;AAGH;;AACD,SAAOzB,OAAO,CAACC,GAAD,EAAK;AAAC0B,IAAAA,MAAM,EAAE;AAAT,GAAL,CAAd;AACH,CARM;AAUP,OAAO,IAAMC,IAAI,GAAG,SAAPA,IAAO,CAAC3B,GAAD,EAAsB;AAAA,MAAhBgB,MAAgB,uEAAP,EAAO;AACtC,SAAOjB,OAAO,CAACC,GAAD,EAAM;AAChB4B,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAed,MAAf,CADU;AAEhBe,IAAAA,OAAO,EAAE;AACL,sBAAgB;AADX,KAFO;AAKhBL,IAAAA,MAAM,EAAE;AALQ,GAAN,CAAd;AAOH,CARM;AAUP,eAAe;AACXX,EAAAA,GAAG,EAAHA,GADW;AAEXY,EAAAA,IAAI,EAAJA;AAFW,CAAf","sourcesContent":["const request = (url: string, config: any) => {\r\n    return fetch(url, config).then((res: any) => {\r\n        if (!res.ok) {\r\n            throw Error('');\r\n        }\r\n        return res.json();\r\n    }).then((resJson: any) => {\r\n        if (resJson.code !== 200) {\r\n            throw Error(resJson.message);\r\n        } else {\r\n            return resJson.data;\r\n        }\r\n    }).catch((error: any) => {\r\n        // 公共错误处理\r\n        console.log(error)\r\n    });\r\n};\r\n\r\nexport const get = (url, params?) => {\r\n    url = `${process.env.BASE_URL}${url}`;\r\n    if (params) {\r\n        url += Object.keys(params).reduce((accumulator, currentValue, index) => {\r\n            return `${index !== 0 ? '&' : ''}${accumulator}${currentValue}=${params[currentValue]}`\r\n        }, '?')\r\n    }\r\n    return request(url,{method: 'GET'})\r\n}\r\n\r\nexport const post = (url, params = {}) => {\r\n    return request(url, {\r\n        body: JSON.stringify(params),\r\n        headers: {\r\n            'content-type': 'application/json'\r\n        },\r\n        method: 'POST'\r\n    });\r\n}\r\n\r\nexport default {\r\n    get,\r\n    post\r\n}"]},"metadata":{},"sourceType":"module"}